<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCMS Noticeboard Admin</title>
    <link rel="stylesheet" href="./admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="admin-container">
        <header class="admin-header">
            <div class="header-left">
                <img src="/logo.png" alt="SCMS Logo" class="admin-logo"
                    onerror="this.src='https://placehold.co/50x50?text=Logo'" />
                <h1>Admin Dashboard</h1>
            </div>
            <div class="header-actions">
                <span id="save-status" class="status-msg"></span>
                <a href="/" class="btn" style="background:#e0e0e0; color:#333; text-decoration:none;">View
                    Noticeboard</a>
                <button id="save-btn" class="btn primary">Save Changes to Display</button>
            </div>
        </header>

        <div class="admin-tabs">
            <button class="tab-btn active" onclick="switchTab('tab-notices')">Notices</button>
            <button class="tab-btn" onclick="switchTab('tab-events')">Events</button>
            <button class="tab-btn" onclick="switchTab('tab-birthdays')">Birthdays</button>
            <button class="tab-btn" onclick="switchTab('tab-cctv')">CCTV Feeds</button>
        </div>

        <main class="admin-content">

            <!-- Notices Section -->
            <section id="tab-notices" class="tab-pane active">
                <div class="panel-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <h2>Recent Notices</h2>
                        <label class="visibility-toggle">
                            <input type="checkbox" id="toggle-notices" checked>
                            <span class="toggle-slider"></span>
                            Show on Noticeboard
                        </label>
                    </div>
                    <button class="btn small" onclick="addNotice()">+ Add Notice</button>
                </div>
                <!-- Card Container Grid -->
                <div id="notices-list" class="card-grid">
                    <!-- Template injected via JS -->
                </div>
            </section>

            <!-- Events Section -->
            <section id="tab-events" class="tab-pane">
                <div class="panel-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <h2>Upcoming Events</h2>
                        <label class="visibility-toggle">
                            <input type="checkbox" id="toggle-events" checked>
                            <span class="toggle-slider"></span>
                            Show on Noticeboard
                        </label>
                    </div>
                    <button class="btn small" onclick="addEvent()">+ Add Event</button>
                </div>
                <div id="events-list" class="card-grid">
                    <!-- Template injected via JS -->
                </div>
            </section>

            <!-- Birthdays Section -->
            <section id="tab-birthdays" class="tab-pane">
                <div class="panel-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <h2>Birthdays</h2>
                        <label class="visibility-toggle">
                            <input type="checkbox" id="toggle-birthdays" checked>
                            <span class="toggle-slider"></span>
                            Show on Noticeboard
                        </label>
                    </div>
                    <button class="btn small" onclick="addBirthday()">+ Add Birthday</button>
                </div>
                <div id="birthdays-list" class="card-grid">
                    <!-- Template injected via JS -->
                </div>
            </section>

            <!-- CCTV Section -->
            <section id="tab-cctv" class="tab-pane">
                <div class="panel-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <h2>Security Feeds (CCTV)</h2>
                        <label class="visibility-toggle">
                            <input type="checkbox" id="toggle-cctv" checked>
                            <span class="toggle-slider"></span>
                            Show on Noticeboard
                        </label>
                    </div>
                    <button class="btn small" onclick="addCctv()">+ Add Feed</button>
                </div>
                <div id="cctv-list" class="card-grid">
                    <!-- Template injected via JS -->
                </div>
            </section>

        </main>
    </div>

    <!-- Templates for JS Cloning -->
    <template id="notice-template">
        <div class="data-item">
            <div class="item-header">
                <div class="input-group">
                    <label>Notice Title</label>
                    <input type="text" class="input-title" placeholder="e.g. HOLIDAY ANNOUNCEMENT">
                </div>
                <button class="btn danger small" onclick="promptRemoveItem(this)">Remove Notice</button>
            </div>

            <div class="input-group">
                <label>Notice Body Content</label>
                <textarea class="input-content" placeholder="Type the main message here..."></textarea>
            </div>

            <div class="item-footer">
                <div class="input-group row-align">
                    <label>Expiration Date</label>
                    <input type="date" class="input-date">
                </div>
                <label class="checkbox-label"><input type="checkbox" class="input-urgent"> Mark as Urgent (Red
                    Blink)</label>
            </div>
        </div>
    </template>

    <template id="event-template">
        <div class="data-item">
            <div class="item-header">
                <div class="input-group">
                    <label>Event Name</label>
                    <input type="text" class="input-title" placeholder="e.g. Guest Lecture IT">
                </div>
                <button class="btn danger small" onclick="promptRemoveItem(this)">Remove Event</button>
            </div>

            <div class="input-group">
                <label>Location / Details</label>
                <input type="text" class="input-desc" placeholder="e.g. Room 302 at 11:00 AM">
            </div>

            <div class="item-footer">
                <div class="input-group row-align">
                    <label>Display Date</label>
                    <input type="text" class="input-date-string" placeholder="e.g. OCT 26">
                </div>
            </div>
        </div>
    </template>

    <template id="birthday-template">
        <div class="data-item">
            <div class="item-header">
                <div class="input-group">
                    <label>Person's Name</label>
                    <input type="text" class="input-name" placeholder="e.g. Prof. Alan Turing">
                </div>
                <button class="btn danger small" onclick="promptRemoveItem(this)">Remove</button>
            </div>

            <div class="input-group">
                <label>Department / Role</label>
                <input type="text" class="input-dept" placeholder="e.g. Computer Science">
            </div>

            <div class="item-footer">
                <div class="input-group row-align">
                    <label>Birthday (MM-DD)</label>
                    <input type="text" class="input-bdate" placeholder="e.g. 10-25">
                </div>
            </div>
        </div>
    </template>

    <template id="cctv-template">
        <div class="data-item">
            <div class="item-header">
                <div class="input-group">
                    <label>Feed Label</label>
                    <input type="text" class="input-label" placeholder="e.g. MAIN GATE">
                </div>
                <button class="btn danger small" onclick="promptRemoveItem(this)">Remove</button>
            </div>

            <div class="input-group">
                <label>Camera Stream URL</label>
                <input type="text" class="input-stream"
                    placeholder="http://ip_address/stream (Leave blank for STATIC image)">
            </div>

            <div class="item-footer">
                <div class="input-group row-align">
                    <label>Grid Position</label>
                    <select class="input-grid">
                        <option value="1">Grid 1 (Top-Left)</option>
                        <option value="2">Grid 2 (Top-Right)</option>
                        <option value="3">Grid 3 (Bottom-Left)</option>
                        <option value="4">Grid 4 (Bottom-Right)</option>
                    </select>
                </div>
            </div>
        </div>
    </template>

    <!-- Custom Deletion Modal -->
    <div id="delete-modal" class="modal-overlay">
        <div class="modal">
            <h3>Confirm Deletion</h3>
            <p>Are you sure you want to remove this item? This action cannot be undone once saved.</p>
            <div class="modal-actions">
                <button class="btn" onclick="closeModal()">Cancel</button>
                <button class="btn danger" onclick="confirmRemoveItem()">Yes, Remove</button>
            </div>
        </div>
    </div>

    <script type="module" src="./admin.js"></script>
</body>

</html>